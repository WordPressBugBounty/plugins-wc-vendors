!(function(e, o) {
  e(document).ready(function(l) {
    l(document).on('click', '.wcv-shade.wcv-fade.visible', function(e) {
      if (!e.target.closest('.wcv-modal')) {
        e = l(this).find('.wcv-modal')[0];
        if (e)
          try {
            var t = o.UI.Modal_1.getInstance(e);
            t && t.dismiss();
          } catch (e) {
            console.error('Error dismissing modal:', e);
          }
      }
    });
    let t = l('.wcv-dashboard-menu.secondary'),
      s = l('#dashboard-menu-item-more-button'),
      c = l('.wcv-dashboard-menu.primary'),
      r = l('#wcv-navigation');
    function e() {
      let i = r.width(),
        n = s.outerWidth(!0),
        a = 0,
        o = -1,
        e = [];
      c.find('li').each(function() {
        e.push(l(this));
      }),
        t.find('li').each(function() {
          e.push(l(this));
        }),
        t.empty(),
        c.empty(),
        e.forEach(e => {
          e.css('opacity', 0.5)
            .appendTo(c)
            .animate({ opacity: 1 }, 100);
        }),
        s.hide(),
        c.find('li').each(function(e, t) {
          var s = l(this).outerWidth(!0);
          0 < e && (a += 24), (a += s) + n > i && -1 === o && (o = e);
        }),
        -1 !== o &&
          (s.show().css('display', 'flex'),
          c.find('li').each(function(e) {
            e >= o && l(this).appendTo(t);
          }));
    }
    e(), l(window).on('resize', e);
    function i() {
      var e,
        t = l(window).width(),
        s = l('.wcv-store-setup-steps'),
        i = l('.wcv-store-setup-progress-bar'),
        n = l('.wcv-store-setup-progress-bar-fill'),
        a = l('.wcv-store-setup-step.completed:last'),
        o = l('.wcv-store-setup-step:first'),
        c = l('.wcv-store-setup-step:last');
      if (
        (o.length && c.length && 768 < t
          ? ((e = c.position().left - o.position().left + c.width()),
            i.css({
              width: e + 'px',
              height: '8px',
              top: o.position().top + 72 + 'px',
              left: '50%'
            }))
          : o.length &&
            c.length &&
            t <= 768 &&
            (a.next(),
            (e = l('.wcv-store-setup-step-icon:first')),
            (e =
              l('.wcv-store-setup-step-icon:last').offset().top -
              e.offset().top),
            i.css({
              width: '3px',
              height: e + 'px',
              top: o.position().top + 40 + 'px',
              left: o.position().left + 20 - 2 + 'px'
            })),
        a.length && 768 < t)
      ) {
        var i = a.next();
        let e = c.position().left - s.position().left + c.width();
        i.length &&
          i.position().left != c.position().left &&
          (e = i.position().left - s.position().left + c.width() / 2),
          n.css('width', e + 'px');
      } else a.length && t <= 768 && ((e = l('.wcv-store-setup-step-icon:first')), (o = l('.wcv-store-setup-step-icon:last')), (i = a.next()).length && i.position().top != c.position().top ? ((s = i.find('.wcv-store-setup-step-icon').offset().top - e.offset().top), n.css({ width: '3px', height: s + 'px' })) : ((t = o.offset().top - e.offset().top), n.css({ width: '3px', height: t + 'px' })));
    }
    (a =
      0 < l('#dashboard-menu-item-view-store').length
        ? l('#dashboard-menu-item-view-store')
        : l('#dashboard-menu-item-settings')),
      l('<li class="wcv-dashboard-menu-divider"></li>').insertBefore(a),
      l('a.mark-order-unshipped').on('click', function(e) {
        confirm(wcvendor_dashboard.mark_unshipped_confirm) ||
          e.preventDefault();
      }),
      l('.wcv-store-setup-dismiss').on('click', function(e) {
        e.preventDefault(),
          l.ajax({
            url: wcvendor_dashboard.ajax_url,
            type: 'POST',
            data: {
              action: 'wcv_dismiss_store_setup_step_section',
              nonce: wcvendor_dashboard.dashboard_nonce
            },
            success: function(e) {
              e.success && l('.wcv-store-setup-steps-wrapper').remove();
            },
            error: function(e) {
              console.error(e);
            }
          });
      }),
      i(),
      l(window).on('resize', function() {
        i();
      }),
      l(document).on('click', function(e) {
        l(e.target).closest('#dashboard-menu-item-more-button').length
          ? s.length &&
            t.length &&
            (t.toggleClass('show'), s.toggleClass('show'))
          : (s.removeClass('show'), t.removeClass('show'));
      }),
      l('.wcv-custom-select').each(function() {
        buildCustomSelect(this);
      }),
      l('.wcv-open-popup-add-note').on('click', function(e) {
        e = e.target.getAttribute('data-modal');
        document.getElementById(e).dispatchEvent(new Event('click'));
      });
    let n = l('#_wcv_store_country').val();
    l('#_wcv_store_country').on('change', function() {
      (n = l(this).val()),
        l('#wcv-country-code-select')
          .val(n)
          .trigger('change');
    });
    var a = wcvendor_dashboard.countries_phone_codes.map(e => ({
      id: e.code,
      text: e.flag + ` ${e.name} ` + e.dial_code,
      flag: e.flag,
      name: e.name,
      dial_code: e.dial_code,
      selected: e.code === n
    }));
    l('#wcv-country-code-select').select2({
      templateSelection: function(e) {
        return e.id ? e.flag + '  ' + e.dial_code : e.text;
      },
      data: a,
      dropdownAutoWidth: !0,
      value: n
    }),
      l(document).on('mouseenter', '.wcv-tip', showTooltip),
      l(document).on('mouseleave', '.wcv-tip', function(e) {
        var t,
          e = e.currentTarget;
        e &&
          ((t = e.querySelector('.content')),
          (e = e.querySelector('.arrow')),
          t) &&
          e &&
          ((t.style.display = 'none'), (e.style.display = 'none'));
      }),
      addAccordion(),
      productEditAccordion(),
      l(document).on('click', '.tabs-tab', function(e) {
        var t = l(this).attr('href'),
          s = l('#wcv-store-settings');
        t && s.length && s.attr('action', t);
      });
  });
})(jQuery, Ink);
let getPlaceHolderText = e => {
    var t = e.querySelectorAll('option'),
      s = [];
    for (let e = 0; e < t.length; e++)
      t[e].selected && '' !== t[e].value && s.push(t[e]);
    return 0 === s.length
      ? e.getAttribute('placeholder') || wcvendor_dashboard.option_none_text
      : 1 === s.length
      ? s[0].innerText
      : s.length + ' selected';
  },
  buildCustomSelect = e => {
    e.offsetWidth;
    var t = e.getAttribute('id');
    let s = e.getAttribute('data-text-align'),
      i =
        ((s = s || 'center'),
        (e.style.display = 'none'),
        document.createElement('div')),
      n = (i.setAttribute('data-id', t), document.createElement('ul'));
    var t = e.multiple,
      a = e.getAttribute('data-autosubmit'),
      o = document.createElement('span'),
      c =
        ((o.innerHTML = getPlaceHolderText(e)),
        (o.className = 'wcv-select-placeholder'),
        (i.className = 'wcv-select-container'),
        (n.className = 'wcv-select-list'),
        Array.from(e.options).some(e => e.hasAttribute('data-depth'))),
      l =
        (c &&
          (i.classList.add('wcv-hierarchical-select'),
          n.classList.add('wcv-hierarchical-list')),
        i.appendChild(o),
        i.appendChild(n),
        e.options);
    (c ? buildHierarchicalOptions : buildFlatOptions)(n, l, t, a, o, e, s),
      e.parentNode.insertBefore(i, e),
      i.addEventListener('click', function() {
        i.classList.toggle('show'), n.classList.toggle('show');
      }),
      i.addEventListener('dblclick', function(e) {
        e.preventDefault();
      }),
      document.addEventListener('click', function(e) {
        e = e.target;
        i.contains(e) ||
          (i.classList.remove('show'), n.classList.remove('show'));
      });
  },
  buildHierarchicalOptions = (t, s, i, n, a, o, c) => {
    let l = new Map();
    var r = new Map();
    for (let e = 0; e < s.length; e++) {
      var d = s[e],
        p = parseInt(d.getAttribute('data-depth') || '0'),
        u = d.getAttribute('data-parent') || '0',
        v = d.getAttribute('data-term-id') || d.value,
        d = createOptionItem(d, e, i, n, a, o, c);
      d.classList.add('wcv-depth-' + p),
        d.setAttribute('data-depth', p),
        d.setAttribute('data-parent-id', u),
        d.setAttribute('data-term-id', v),
        l.has(u) || l.set(u, []),
        l.set(v, []),
        0 === p ? (t.appendChild(d), r.set(v, d)) : l.get(u).push(d);
    }
    let h = (i, e) => {
      e = l.get(e);
      if (e && 0 < e.length) {
        i.classList.add('wcv-has-children');
        let s = document.createElement('ul');
        (s.className = 'wcv-select-submenu wcv-collapse'),
          i.parentNode.insertBefore(s, i.nextSibling),
          e.forEach(e => {
            s.appendChild(e);
            var t = e.getAttribute('data-term-id');
            h(e, t);
          });
        e = i.querySelector('span');
        if (e) {
          let t = document.createElement('span');
          (t.className = 'wcv-collapse-indicator'),
            (t.innerHTML = '+'),
            e.appendChild(t),
            i.addEventListener('mouseenter', function(e) {
              s.classList.add('expanded'),
                t.classList.add('expanded'),
                i.classList.add('expanded'),
                (t.innerHTML = '-');
            }),
            i.addEventListener('mouseleave', function(e) {
              e = e.relatedTarget;
              (e && (i.contains(e) || s.contains(e))) ||
                (s.classList.remove('expanded'),
                t.classList.remove('expanded'),
                i.classList.remove('expanded'),
                (t.innerHTML = '+'),
                s
                  .querySelectorAll('.wcv-select-submenu.expanded')
                  .forEach(e => {
                    e.classList.remove('expanded');
                    var e = e.previousElementSibling;
                    e &&
                      (e.classList.remove('expanded'),
                      (e = e.querySelector('.wcv-collapse-indicator'))) &&
                      (e.classList.remove('expanded'), (e.innerHTML = '+'));
                  }));
            }),
            s.addEventListener('mouseleave', function(e) {
              e = e.relatedTarget;
              (e && (i.contains(e) || s.contains(e))) ||
                (s.classList.remove('expanded'),
                t.classList.remove('expanded'),
                i.classList.remove('expanded'),
                s
                  .querySelectorAll('.wcv-select-submenu.expanded')
                  .forEach(e => {
                    e.classList.remove('expanded');
                    var e = e.previousElementSibling;
                    e &&
                      (e.classList.remove('expanded'),
                      (e = e.querySelector('.wcv-collapse-indicator'))) &&
                      (e.classList.remove('expanded'), (e.innerHTML = '+'));
                  }));
            });
        }
      }
    };
    r.forEach((e, t) => {
      h(e, t);
    });
  },
  buildFlatOptions = (t, s, i, n, a, o, c) => {
    for (let e = 0; e < s.length; e++) {
      var l = s[e],
        l = createOptionItem(l, e, i, n, a, o, c);
      t.appendChild(l);
    }
  },
  createOptionItem = (e, t, i, n, a, o, s) => {
    let c = document.createElement('li');
    (c.className = 'wcv-select-item'),
      e.className && c.classList.add(...e.className.split(' '));
    var l = document.createElement('span');
    let r = e.innerText;
    return (
      (r = r.replace(/^\d+\s+levels?\s+deep\s+/g, '')),
      (l.innerHTML = r),
      c.appendChild(l),
      (c.style.textAlign = s),
      c.setAttribute('data-value', e.value),
      c.setAttribute('data-index', t),
      e.selected && '' !== e.value && c.classList.add('selected'),
      c.addEventListener('click', function(e) {
        e.stopPropagation();
        var t,
          s = this.getAttribute('data-index'),
          e = o.options[s];
        if (i) (e.selected = !e.selected), c.classList.toggle('selected');
        else {
          for (let e = 0; e < o.options.length; e++)
            e != s &&
              ((o.options[e].selected = !1),
              o.parentNode
                .querySelectorAll(`[data-index="${e}"]`)
                .forEach(e => e.classList.remove('selected')));
          (e.selected = !0), c.classList.add('selected');
        }
        if ('' === e.value)
          for (let e = 0; e < o.options.length; e++)
            e != s &&
              ((o.options[e].selected = !1),
              o.parentNode
                .querySelectorAll(`[data-index="${e}"]`)
                .forEach(e => e.classList.remove('selected')));
        (a.innerHTML = getPlaceHolderText(o)),
          o.dispatchEvent(new Event('change')),
          i ||
            ((t = (e = o.parentNode.querySelector(
              '.wcv-select-container'
            )).querySelector('.wcv-select-list')),
            e && t && (e.classList.remove('show'), t.classList.remove('show'))),
          n && (e = o.closest('form')) && e.submit();
      }),
      c
    );
  };
function showTooltip(s) {
  s = s.currentTarget;
  if (s) {
    var i = s.querySelector('.content'),
      n = s.querySelector('.arrow');
    if (i && n) {
      (i.style.display = 'block'), (n.style.display = 'block');
      var s = s.getBoundingClientRect(),
        a = i.getBoundingClientRect();
      let e = -a.height - 10,
        t = s.width / 2 - a.width / 2 + 4;
      s.left + a.width > window.innerWidth && (t = s.width - a.width);
      var o = s.top - a.height < 0;
      o && (e = s.height + 10),
        (i.style.top = e + 'px'),
        (i.style.left = t + 'px'),
        n &&
          ((i = n.getBoundingClientRect()),
          (a = o ? -i.height : a.height),
          (s = s.width / 2 - i.width / 2 - t + 4),
          (n.style.top = a + 'px'),
          (n.style.left = s + 'px'),
          (n.style.transform = o ? 'rotate(180deg)' : ''));
    }
  }
}
let addAccordion = () => {
    var e = document.querySelector('#wcv-store-settings .wcv-tabs');
    let o = document.querySelectorAll('#wcv-store-settings .tabs-content');
    if (
      e &&
      (e.querySelectorAll('a.tabs-tab').forEach(e => {
        let t = e.getAttribute('href').replace('#', '');
        var s = e.innerText,
          i = document.querySelector('#' + t),
          n = document.createElement('div'),
          e =
            e.classList.contains('has-dot') &&
            null !== e.querySelector('.wcv-dot');
        (n.className = 'wcv-accordion-content'), wrapElemt(i, n);
        let a = document.createElement('div');
        (a.className = 'wcv_mobile wcv-accordion-title'),
          i.classList.contains('active') &&
            (a.classList.add('active'), i.parentNode.classList.add('active'));
        i = document.createElement('span');
        (i.className = 'wcv-accordion-title-text'),
          (i.innerHTML = s),
          e &&
            (a.classList.add('has-dot'),
            (i.innerHTML += '<span class="wcv-dot"></span>')),
          a.appendChild(i),
          a.addEventListener('click', function() {
            a.classList.toggle('active'),
              o.forEach(e => {
                e.id === t
                  ? (a.classList.contains('active')
                      ? (e.classList.add('active'),
                        e.classList.remove('hide-all'))
                      : (e.classList.add('hide-all'),
                        e.classList.remove('active')),
                    e.parentNode.classList.toggle('active'))
                  : (e.classList.add('hide-all'),
                    e.classList.remove('active'),
                    e.parentNode.classList.remove('active'),
                    e.parentNode
                      .querySelector('.wcv-accordion-title')
                      .classList.remove('active'));
              });
          }),
          n.prepend(a);
      }),
      'undefined' != typeof tinymce && 0 < tinymce.editors.length)
    ) {
      var t = document.querySelectorAll('.wp-editor-area'),
        s = tinyMCEPreInit.mceInit;
      for (let e = 0; e < t.length; e++) {
        var i = t[e].id;
        reinitWPEditor(i, s[i]);
      }
    }
  },
  productEditAccordion = () => {
    var e = document.querySelectorAll('#wcv-product-edit .tabs-content');
    let o = wcvendor_dashboard.product_meta_tabs;
    e.forEach(t => {
      var s = t.id;
      if (o[s]) {
        var i = o[s],
          n = i.label,
          a = document.createElement('div');
        (a.className = 'wcv-product-accordion is_hidden ' + i.class.join(' ')),
          wrapElemt(t, a);
        let e = document.createElement('div');
        (e.className = 'wcv-accordion-title'), e.setAttribute('data-tab', s);
        (i = document.createElement('h3')),
          (s = document.createElementNS('http://www.w3.org/2000/svg', 'svg'));
        s.classList.add('wcv-icon', 'wcv-icon-24'),
          (s.innerHTML = `<use xlink:href="${wcvendor_dashboard.icon_url}#wcv-icon-caret-down"></use>`),
          (i.innerHTML = n),
          e.appendChild(i),
          e.appendChild(s),
          e.addEventListener('click', function() {
            e.classList.toggle('active'),
              e.classList.contains('active')
                ? (t.classList.add('active'), t.classList.remove('hide-all'))
                : (t.classList.add('hide-all'), t.classList.remove('active'));
          }),
          a.prepend(e);
      }
    });
  },
  wrapElemt = (e, t) => {
    e.parentNode.insertBefore(t, e), t.appendChild(e);
  };
function reinitWPEditor(e, t) {
  'undefined' != typeof tinymce && (s = tinymce.get(e)) && s.remove();
  var s = document.getElementById(e);
  s
    ? tinymce.init(t)
    : console.error(`Editor element with ID "${e}" not found.`);
}
let buildCustomToggleMenu = t => {
  let s = document.querySelector(t);
  if (s) {
    t = s.getAttribute('data-target');
    let e = document.querySelector(t);
    s.addEventListener('click', function() {
      s.classList.toggle('open'), e.classList.toggle('show');
    });
  }
};
